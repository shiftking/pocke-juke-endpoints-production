<!DOCTYPE html>
<html lang="en">
  <head>
      <link rel="stylesheet" href="../css/style_index.css">
      <link rel="stylesheet" href="../css/join_party.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css">
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <!-- Latest compiled and minified JavaScript -->


      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  </head>
  <body>
  </body>
  <script>

      (function() {
        var hash = {};
        window.location.hash.replace(/^#\/?/, '').split('&').forEach(function(kv) {
          var spl = kv.indexOf('=');
          if (spl != -1) {
            hash[kv.substring(0, spl)] = decodeURIComponent(kv.substring(spl+1));
          }
        });
        console.log('initial hash', hash);
        if (hash.access_token) {
          window.opener.postMessage(JSON.stringify({
            type:'access_token',
            access_token: hash.access_token,
            expires_in: hash.expires_in || 0
          }), 'http://localhost:8080/landing');
          window.close();
          }
      })();
  </script>
</html>
